# Mobasher API (Phase 1)

Base URL (dev): `http://127.0.0.1:8001`

## Health
- GET `/health` → `{ "status": "ok" }`

## Channels
- GET `/channels?limit=100&offset=0&active_only=false`
  - Response:
```json
{
  "items": [ { "id": "kuwait_news", "name": "..." } ],
  "meta": { "limit": 100, "offset": 0, "next_offset": null }
}
```
- GET `/channels/{id}` → channel
- POST `/channels` (upsert)
```json
{ "id": "kuwait_news", "name": "Kuwait News", "url": "...", "headers": {}, "active": true }
```

## Recordings
- GET `/recordings?channel_id=&since=&status=&limit=50&offset=0`
  - `status`: running|completed|failed|stopped
  - Response is paginated with `items[]` and `meta{...}`

## Segments
## Screenshots (new)
- GET `/screenshots?channel_id=&since=&limit=24&offset=0`
  - Response:
```json
{
  "items": [
    {
      "id": "...",
      "channel_id": "kuwait_news",
      "segment_id": "...",
      "segment_started_at": "2025-09-11T22:10:00Z",
      "frame_timestamp_ms": 30000,
      "screenshot_path": "/Volumes/ExternalDB/Media-View-Data/data/screenshot/kuwait_news/2025-09-11/kuwait_news-...-t30000.jpg",
      "created_at": "2025-09-11T22:10:35Z"
    }
  ],
  "meta": { "limit": 24, "offset": 0, "next_offset": null }
}
```

- GET `/segments?channel_id=&start=&end=&status=&limit=200&offset=0`
  - `status`: created|processing|completed|failed
  - Response is paginated with `items[]` and `meta{...}`

Notes
- API is bound to localhost by default via CLI: `./scripts/mediaview api serve`
- Use `--public` to bind 0.0.0.0 (not recommended without network protection)
