id: kuwait_news
name: Kuwait News Channel
description: Kuwait News Channel (Majlis) live stream

input:
  url: "https://kwtsplta.cdn.mangomolo.com/kb/smil:kb.stream.smil/chunklist.m3u8"
  headers:
    Referer: "https://www.elahmad.com/"
    User-Agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36"
  
recording:
  segment_seconds: 60
  archive_mkv: false              # Use MP4 format
  video_enabled: true             # Enable video recording
  audio_enabled: true             # Enable audio recording
  video_quality: "720p"           # Configurable quality
  # Note: encoder/preset are configured under the top-level 'video' section
  
  # Archive recorder settings (1-hour segments for viewing)
  archive_enabled: true
  archive_segment_seconds: 1800   # 30 minute segments
  archive_quality: "1080p"        # Higher quality for viewing
  # Note: archive uses same encoder defaults as 'video' unless overridden in code
  
  # Reconnection settings
  reconnect_attempts: 5
  reconnect_delay_max: 10

audio:
  sample_rate: 16000
  channels: 1
  format: "pcm_s16le"             # For ASR processing
  bitrate: "128k"                 # For archive quality

video:
  # Encoder/preset/threads for CPU tuning (new)
  # macOS recommended defaults:
  encoder: libx264                # Linux/CPU-friendly encoder
  preset: veryfast                # Good balance for CPU
  threads: 2                      # Only used by libx264
  # Quality presets
  qualities:
    "720p":
      resolution: "1280x720"
      bitrate: "2500k"
      fps: 25
    "1080p":
      resolution: "1920x1080" 
      bitrate: "4500k"
      fps: 25
    "original":
      resolution: "copy"
      bitrate: "copy"
      fps: "copy"

asr:
  model: "large-v3"
  language: "ar"
  beam_size: 5
  vad_enabled: true
  word_timestamps: true
  condition_on_previous_text: true

vision:
  enabled: true
  fps:
    ocr: 1
    objects: 2
    faces: 1
    scene_detection: 0.5
  
  models:
    object_detection: "yolov8s.onnx"
    face_recognition: "buffalo_l"
    ocr_model: "arabic"
  
  face_gallery: "data/face_gallery/"
  confidence_thresholds:
    objects: 0.5
    faces: 0.6
    ocr: 0.7

analysis:
  embed_model: "sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2"
  topic_detection: true
  speaker_diarization: false
  
storage:
  media_root: "data/"
  date_folders: true              # Enable YYYY-MM-DD folder structure
  retention_days: 30
  compression_enabled: true
  
  # Directory structure
  directories:
    audio: "audio"                # data/audio/YYYY-MM-DD/
    video: "video"                # data/video/YYYY-MM-DD/
    archive: "archive"            # data/archive/YYYY-MM-DD/

monitoring:
  metrics_enabled: true
  health_check_interval: 30
  log_level: "INFO"
